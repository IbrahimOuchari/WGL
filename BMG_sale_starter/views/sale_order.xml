<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="view_new_order_form" model="ir.ui.view">
        <field name="name">view.new.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <!-- modification header -->
            <xpath expr="/form/header/field[@name='state']" position="attributes">
                <attribute name="statusbar_visible">brouillon,sale,fait</attribute>
            </xpath>
            <xpath expr="//form//header//button[@name='action_draft']" position="replace">
                <button string="Remettre en Brouillon" name="action_draft_bc" type="object" groups="base.group_erp_manager"/>
            </xpath>
            <xpath expr="//header//button[@name='action_confirm']" position="attributes">
                <attribute name="attrs">{'invisible': [('state', 'not in', ['brouillon'])]}</attribute>
            </xpath>
            <!-- fin -->
            <!-- modification info BC -->
            <xpath expr="//sheet//field[@name='validity_date']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//sheet//label[@for='date_order']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//sheet//field[@name='date_order']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//sheet//field[@name='date_order']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//sheet//button[@name='update_prices']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('show_update_pricelist', '=', False), ('state', 'in',
                    ['fait', 'done','cancel'])]}
                </attribute>
            </xpath>
            <xpath expr="//sheet//field[@name='partner_id']" position="attributes">
                <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
            </xpath>

                    <xpath expr="//sheet//field[@name='partner_id']" position="after">
                <field name="devis_seq"/>
                <field name="commitment_date" string="Date de livraison prévue"/>
            </xpath>
            <!-- fin -->
            <!-- modification page ligne de commande -->

            <xpath expr="//sheet//notebook//page//tree//field[@name='product_id']"
                   position="attributes">
                <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
            </xpath>
            <!-- fin -->

            <!-- modification page autre information -->

            <xpath expr="//sheet//notebook//page//field[@name='user_id']"
                   position="attributes">
                <attribute name="options">{'no_create': True, 'no_create_edit':True}</attribute>
            </xpath>
            <xpath expr="//sheet//notebook//page//field[@name='require_signature']"
                   position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//sheet//notebook//page//field[@name='require_payment']"
                   position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//sheet//field[@name='partner_id']"
                   position="after">
                <field name="client_order_ref" position="move"/>
                <field name="tag_ids" position="move"/>
            </xpath>


            <!-- fin -->
            <xpath expr="//sheet//notebook//page[@name='customer_signature']"
                   position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <record id="sale_order_inehrite_tree_view" model="ir.ui.view">
        <field name="name">sale.order.inehrite.tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="optional">hide</attribute>
                <attribute name="string">Commercial</attribute>
            </xpath>
            <xpath expr="//field[@name='activity_ids']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_untaxed']" position="attributes">
                <attribute name="optional">show</attribute>
                <attribute name="string">Montant H.T.</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_tax']" position="attributes">
                <attribute name="optional">show</attribute>
                <attribute name="string">T.V.A.</attribute>
            </xpath>
            <xpath expr="//field[@name='amount_total']" position="attributes">
                <attribute name="string">Montant T.T.C.</attribute>
            </xpath>

        </field>
    </record>
    <!-- search panel BC -->
    <record id="bc_panneaux_recherche_sale_order_search" model="ir.ui.view">
        <field name="name">sale.order.search (bc_panneaux_recherche)</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">
            <search position="inside">
                <searchpanel>
                    <field name="state" enable_counters="1"/>
                    <field name="invoice_status" enable_counters="1"/>
                </searchpanel>
            </search>
        </field>
    </record>

    <!--    Ruban Facturé dans BC-->
    <record id="ow_sale_order_paid_ribbon" model="ir.ui.view">
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/div[@name='button_box']" position="after">
                <widget name="web_ribbon" title="Facturé" attrs="{'invisible': [('invoice_status', '!=', 'invoiced')]}"/>
            </xpath>
        </field>
    </record>
    <!-- menu item -->
    <menuitem id="sale.report_sales_team"
              name="Sales Teams"
              parent="sale.sale_menu_root"
              groups="sales_team.group_sale_manager"
              action="sales_team.crm_team_salesteams_act"
              sequence="6"/>
    <menuitem id="sale.res_partner_menu"
              parent="sale.sale_menu_root"
              action="account.res_partner_action_customer"
              sequence="3" groups="sales_team.group_sale_salesman"/>
    <menuitem id="sale.menu_sale_order"
              name="Orders"
              action="sale.action_orders"
              parent="sale.sale_menu_root"
              sequence="2" groups="sales_team.group_sale_salesman"/>
    <menuitem action="sale.product_template_action"
              id="sale.menu_product_template_action"
              parent="sale.sale_menu_root"
              sequence="3"/>
    <menuitem id="sale.menu_product_pricelist_main"
              name="Liste de Prix"
              parent="sale.sale_menu_root"
              action="product.product_pricelist_action2"
              groups="product.group_product_pricelist"
              sequence="4"/>
    <delete model="ir.ui.menu" id="sale.sale_order_menu"/>
    <delete model="ir.ui.menu" id="sale.menu_sale_quotations"/>


</odoo>

